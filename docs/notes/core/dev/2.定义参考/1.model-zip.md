---
title: FurnitureCore 模型
createTime: 2024/12/27 17:36:39
permalink: /notes/core/dev/bg1tkhvi/
---

## 一、模型文件结构

以下为 FurnitureCore 所接受的一个家具模型文件的格式要求：

::: file-tree

- mode_name.zip
  - model_name.json 模型json
  - recipes.json    此模型内置的合成配方
  - texture_1.png   材质
  - path
    - texture_2.png 包含在路径中的材质
:::

约束规则：
  - 模型`压缩包名称（mode_name.zip）`应当与压缩包内的`模型json（model_name.json）`名称保持一致；
  - 名称应当尽量避免使用特殊字符、空格等，请使用下划线代替空格；
  - 模型json应当处于压缩包顶级，不允许嵌套在压缩包中的文件夹内；


## 二、model_name.json 模型文件

FurnitureCore 采用的模型格式与 Minecraft 自带模型格式一致，通常包含以下内容：

```json{3-4}
{
  "textures": {
    "0": "texture_1",
    "1": "path/texture_2"
  },
  "elements": [...],
  "display": {...},
  "groups": [...]
}
```

::: card title="从其他方转换模型到 FurnitureCore 时" icon="twemoji:delivery-truck"

显然有经验的开发者发现了，几乎所有用来导入 Minecraft 的模型都是这种格式。这也就意味着你可以直接将其他插件、mod的模型拿到此处来使用。

不过需要注意的是，由于不同来源模型、材质包对内容物的路径管理方式不同，model.json 文件中的材质文件路径也许需要你手动调整为与 FurnitureCore 的文件组织格式一致（确保路径正确）。
:::

在此基础上 FurnitureCore 增加了几个可选的自定义字段，用于丰富模型功能：

```json{5-7}
{
  ... 以上略
  "display": {...},
  "groups": [...],
  "can_rotate": true,
  "can_hanging": false,
  "function": "none"
}
```

- `can_rotate`：配置模型是否可以旋转角度（默认 `true`）
  - 模型共有16种朝向角度（间隔22.5°），当启用时，玩家放置模型则会自动朝向玩家；
  - 放置后可以通过使用 [螺丝刀](/notes/core/use/for-player/) 右键旋转模型；
- `can_hanging`：配置模型是否可以被悬挂在方块侧面（默认 `false`）
  - 一种类似于展示框的悬挂效果，通常用于挂画类的装饰模型；
  - 当`can_rotate`与此项均为`true`时，如果模型放置在地上则同样可以旋转；
  - 由于游戏的限制，目前无法将东西挂在天花板上；
- `function`：配置模型的功能（默认 `none`）
  - `none`：无实际功能；
  - `chair`：玩家可以坐在模型上，通常用于椅子类家具；
  - `storage`：可以用于存储物品，通常用于柜子类家具；

## 三、recipes.json 家具合成配方

此文件是可选的，当没有此文件时表示此模型不包含一个内置的合成配方。

一个家具可以指定多种配方，包含在文件内的 `recipes` JsonArray 中：

```json
{
  "recipes": [
  ]
}
```

合成配方分为有序配方与无序配方两种，通过配方中的 `type` 字段区分。配方材料只支持 Minecraft 自带物品。

### ①有序配方（shaped）

::: tabs
@tab 例子1

```json
{
  "recipes": [
    {
      "type": "shaped",
      "shape": [
        "sss",
        "sas",
        "sss"
      ],
      "ingredients": {
        "s": "minecraft:stone",
        "a": "minecraft:stick"
      }
    }
  ]
}
```

- shape: 定义了合成配方的形状。每个字符串代表合成网格中的一行，每个字符代表一个材料槽位。字符与 ingredients 中的键对应，并且只能是单字符。
  - 例如，上述示例中，"sss", "sas", "sss" 表示一个3x3的合成网格，其中：
    - s 代表 minecraft:stone
    - a 代表 minecraft:stick
- ingredients: 定义了合成配方中使用的材料。键是 shape 中使用的字符，值是对应的材料。
  - 例如，上述示例中：
    - s 对应 minecraft:stone
    - a 对应 minecraft:stick

![](/shaped-recipe.png)

@tab 例子2

```json
{
  "recipes": [
    {
      "type": "shaped",
      "shape": [
        "s",
        "a"
      ],
      "ingredients": {
        "s": "minecraft:ditr",
        "a": "minecraft:stone"
      }
    }
  ]
}
```

这样配置则下面两种合成方式都可以得到产物，如果希望只能在特定的位置摆放请看`例子3`：

![](/shaped-recipe-1.png)
![](/shaped-recipe-2.png)

@tab 例子3

```json
{
  "recipes": [
    {
      "type": "shaped",
      "shape": [
        "bsb",
        "bab",
        "bbb"
      ],
      "ingredients": {
        "s": "minecraft:ditr",
        "a": "minecraft:stone",
        "b": "minecraft:dir"
      }
    }
  ]
}
```

![](/shaped-recipe-3.png)

:::



### ②无序配方（shapeless）

```json
{
  "recipes": [
    {
      "type": "shapeless",
      "ingredients": [
        "minecraft:stone",
        "minecraft:stone",
        "minecraft:stick"
      ]
    }
  ]
}
```

无序配方配置起来要简单的多，仅需要将合成材料填写在 `ingredients` 列表中即可。

